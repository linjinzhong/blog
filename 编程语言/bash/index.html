<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"jesonlin.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.13.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Bash 是 Unix 系统和 Linux 系统的一种 Shell（命令行环境），是目前绝大多数 Linux 发行版的默认 Shell。">
<meta property="og:type" content="article">
<meta property="og:title" content="bash">
<meta property="og:url" content="https://jesonlin.com/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/bash/index.html">
<meta property="og:site_name" content="jesonlin">
<meta property="og:description" content="Bash 是 Unix 系统和 Linux 系统的一种 Shell（命令行环境），是目前绝大多数 Linux 发行版的默认 Shell。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-12-19T07:13:32.000Z">
<meta property="article:modified_time" content="2023-05-12T08:27:54.440Z">
<meta property="article:author" content="jesonlin">
<meta property="article:tag" content="bash">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://jesonlin.com/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/bash/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://jesonlin.com/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/bash/","path":"编程语言/bash/","title":"bash"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>bash | jesonlin</title>
  






  <script async defer data-website-id="" src=""></script>

  <script defer data-domain="" src=""></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">jesonlin</p>
      <i class="logo-line"></i>
    </a>
      <img class="custom-logo-image" src="/images/qq-image.jpeg" alt="jesonlin">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-resources"><a href="/resources/" rel="section"><i class="fa fa-download fa-fw"></i>resources</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E5%90%AB%E4%B9%89%E5%92%8C%E7%A7%8D%E7%B1%BB"><span class="nav-number">1.</span> <span class="nav-text">shell含义和种类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">2.</span> <span class="nav-text">常用命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B51"><span class="nav-number">3.</span> <span class="nav-text">实践1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B52-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E5%89%8DN%E5%A4%A9%E5%88%9B%E5%BB%BA%E7%9A%84%E5%89%8D%E7%BC%80%E4%B8%BAxxx%E7%9A%84%E8%A1%A8"><span class="nav-number">4.</span> <span class="nav-text">实践2-删除数据库前N天创建的前缀为xxx的表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E8%B7%B53-%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7%E5%92%8C%E4%BF%9D%E6%B4%BB"><span class="nav-number">5.</span> <span class="nav-text">实践3-进程监控和保活</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell%E9%85%8D%E7%BD%AE"><span class="nav-number">6.</span> <span class="nav-text">shell配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">7.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%BC%8F%E6%89%A9%E5%B1%95"><span class="nav-number">8.</span> <span class="nav-text">模式扩展</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E5%8F%B7%E5%92%8C%E8%BD%AC%E4%B9%89-bash%E5%8F%AA%E6%9C%89%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%80%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">9.</span> <span class="nav-text">引号和转义-bash只有字符串一种数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-number">10.</span> <span class="nav-text">变量-环境变量和自定义变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="nav-number">11.</span> <span class="nav-text">字符串操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">12.</span> <span class="nav-text">算术表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bash%E8%84%9A%E6%9C%AC"><span class="nav-number">13.</span> <span class="nav-text">bash脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#REFERENCE"><span class="nav-number">14.</span> <span class="nav-text">REFERENCE</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="jesonlin"
      src="/images/handsome.jpg">
  <p class="site-author-name" itemprop="name">jesonlin</p>
  <div class="site-description" itemprop="description">choice is better than effort</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/linjinzhong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;linjinzhong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jesonlin@outlook.com" title="E-Mail → mailto:jesonlin@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/jesonlinjz" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;jesonlinjz" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/jesonlinjz" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;jesonlinjz" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
  </div>


<!-- CloudCalendar -->
<div class="widget-wrap" style="width: 90%;margin-left: auto;margin-right: auto; opacity: 0.97;">
	<div class="widget" id="CloudCalendar"></div>
</div>
        </div>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">
 

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jesonlin.com/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/bash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/handsome.jpg">
      <meta itemprop="name" content="jesonlin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jesonlin">
      <meta itemprop="description" content="choice is better than effort">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="bash | jesonlin">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          bash
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-12-19 15:13:32" itemprop="dateCreated datePublished" datetime="2022-12-19T15:13:32+08:00">2022-12-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-05-12 16:27:54" itemprop="dateModified" datetime="2023-05-12T16:27:54+08:00">2023-05-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" itemprop="url" rel="index"><span itemprop="name">编程语言</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>15k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>13 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Bash 是 Unix 系统和 Linux 系统的一种 Shell（命令行环境），是目前绝大多数 Linux 发行版的默认 Shell。</p>
<span id="more"></span>


<h2 id="shell含义和种类"><a href="#shell含义和种类" class="headerlink" title="shell含义和种类"></a>shell含义和种类</h2><ol>
<li>Shell 这个单词的原意是“外壳”，跟 kernel（内核）相对应，比喻内核外面的一层，即用户跟内核交互的对话界面。</li>
<li>Shell 是指一种用 C 语言编写的应用程序，提供了一个界面，用户通过这个界面访问操作系统内核的服务。Shell 是一个命令解释器，解释用户输入的命令。</li>
<li>用户可以用 Shell 命令写出各种小程序，又称为脚本（script）。这些脚本都通过 Shell 的解释执行，而不通过编译。</li>
<li>shell包含bash、sh、csh、tcsh、ksh、zsh、fish，其中bash是最常用的shell。</li>
</ol>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ol>
<li><p><code>date</code>命令  </p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 获取当前格式化日期</span><br><span class="line">date_time=`date +%Y/%m/%d-%H:%M:%S`</span><br><span class="line"># 获取前一天日期</span><br><span class="line">early_date=`date -d -1days +%Y/%m/%d`</span><br><span class="line"># 获取后一天日期</span><br><span class="line">early_date=`date -d +1days +%Y/%m/%d`</span><br><span class="line"># 获取当前时间戳</span><br><span class="line">cur_timestamp=`date +%s`</span><br><span class="line"># 获取前1天此时的时间戳</span><br><span class="line">cur_timestamp=e</span><br><span class="line"># 获取后一天此时的时间戳</span><br><span class="line">cur_timestamp=`date -d +1days +%s`</span><br></pre></td></tr></table></figure></li>
<li><p>操作mysql数据库</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># sql语句</span><br><span class="line">sql=&quot;update $&#123;mysql_table&#125; set status=-1 where status=1;&quot;</span><br><span class="line"># 执行sql语句</span><br><span class="line">op=`mysql --host=&quot;localhost&quot; --user=root --password=密码 -v -v -e &quot;$&#123;sql&#125;&quot;`</span><br><span class="line"># 参数-v -v 输出sql语句和结果</span><br><span class="line"># 参数-N输出结果不含列名，-s静默输出，每个结果一行</span><br></pre></td></tr></table></figure>
</li>
<li><p>脚本里生成配置文件</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">cat &gt; /root/a.sh &lt;&lt; EOF</span><br><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">echo &quot;hello bash&quot;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="实践1"><a href="#实践1" class="headerlink" title="实践1"></a>实践1</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#</span><br><span class="line"># 注释：说明当前脚本功能</span><br><span class="line"></span><br><span class="line"># 设置脚本错误停止、变量不存在停止、打印命令、管道命令错误一个也停止</span><br><span class="line">set -euxo pipefail</span><br><span class="line"></span><br><span class="line"># 脚本文件名和参数</span><br><span class="line">echo &#x27;脚本名称：$0=&#x27; $0</span><br><span class="line">echo &#x27;参数数量：$#=&#x27; $#</span><br><span class="line">echo &#x27;参数1：$1=&#x27; $1</span><br><span class="line">echo &#x27;参数2：$2=&#x27; $2</span><br><span class="line">echo &#x27;所有参数：$@=&#x27; $@</span><br><span class="line"></span><br><span class="line"># 遍历打印参数</span><br><span class="line">for i in &quot;$@&quot;;</span><br><span class="line">do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># 读取文件</span><br><span class="line">filename=&#x27;/etc/hosts&#x27;</span><br><span class="line">while read myline</span><br><span class="line">do</span><br><span class="line">    echo &quot;$myline&quot;</span><br><span class="line">done &lt; $filename</span><br><span class="line"></span><br><span class="line"># 函数定义</span><br><span class="line">#######################################</span><br><span class="line"># Cleanup files from the backup dir</span><br><span class="line"># Globals:</span><br><span class="line">#   BACKUP_DIR</span><br><span class="line">#   ORACLE_SID</span><br><span class="line"># Arguments:</span><br><span class="line">#   None</span><br><span class="line"># Returns:</span><br><span class="line">#   None</span><br><span class="line">#######################################</span><br><span class="line">cleanup() &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 退出值为0（成功）</span><br><span class="line">exit 0</span><br><span class="line"># 退出值为1（失败）</span><br><span class="line"></span><br><span class="line">exit 1</span><br></pre></td></tr></table></figure>


<h2 id="实践2-删除数据库前N天创建的前缀为xxx的表"><a href="#实践2-删除数据库前N天创建的前缀为xxx的表" class="headerlink" title="实践2-删除数据库前N天创建的前缀为xxx的表"></a>实践2-删除数据库前N天创建的前缀为xxx的表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#</span><br><span class="line"># 注释：删除数据库N天前创建的前缀为table_prefix的表</span><br><span class="line"></span><br><span class="line">set -euxo pipefail</span><br><span class="line"></span><br><span class="line">N=7</span><br><span class="line">table_prefix=&#x27;tb_xxx_&#x27;</span><br><span class="line"></span><br><span class="line">__str__=&quot;删除数据库$N天前创建的前缀为$&#123;table_prefix&#125;的表&quot;</span><br><span class="line">echo -e &quot;title: $__str__\n&quot;</span><br><span class="line"></span><br><span class="line">host=&#x27;&#x27;</span><br><span class="line">port=&#x27;&#x27;</span><br><span class="line">user=&#x27;&#x27;</span><br><span class="line">passwd=&#x27;&#x27;</span><br><span class="line">db=&quot;&quot;</span><br><span class="line">mysql_export=&quot;export MYSQL_PWD=$&#123;passwd&#125;&quot;</span><br><span class="line">mysql_login=&quot;mysql -h$host -P$port -u$user -D$db&quot;</span><br><span class="line">echo -e &quot;db: $mysql_login\n&quot;</span><br><span class="line"></span><br><span class="line">sql_select=&quot;select TABLE_NAME from INFORMATION_SCHEMA.TABLES where TABLE_SCHEMA=\&quot;$db\&quot; and TABLE_NAME like &#x27;$&#123;table_prefix&#125;%&#x27; and DATEDIFF(now(), CREATE_TIME)&gt;$N order by CREATE_TIME asc&quot;</span><br><span class="line"></span><br><span class="line">tables=`$mysql_export &amp;&amp; $mysql_login -N -e &quot;$sql_select&quot;`</span><br><span class="line">echo -e &quot;res_sql_select: $tables\n&quot;</span><br><span class="line"></span><br><span class="line">if [ &quot;$tables&quot; = &quot;&quot; ]; then</span><br><span class="line">    echo &quot;NULL, exit&quot;</span><br><span class="line">    exit 0</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">wait_del_tables=&#x27;&#x27;</span><br><span class="line">cnt=0</span><br><span class="line">for table in $tables; do</span><br><span class="line">    wait_del_tables=&quot;$wait_del_tables,$db.$table&quot;</span><br><span class="line">    ((cnt++))</span><br><span class="line">done</span><br><span class="line">wait_del_tables=$&#123;wait_del_tables:1&#125;</span><br><span class="line">echo -e &quot;wait_del_tables: $wait_del_tables\n&quot;</span><br><span class="line"></span><br><span class="line">sql_drop=&quot;drop table $wait_del_tables&quot;</span><br><span class="line">res=`$mysql_export &amp;&amp; $mysql_login -e &quot;$sql_drop&quot;`</span><br><span class="line">echo -e &quot;res_sql_drop: $res\n&quot;</span><br><span class="line"></span><br><span class="line">echo -e &quot;Successfully drop $cnt tables\n&quot;</span><br></pre></td></tr></table></figure>


<h2 id="实践3-进程监控和保活"><a href="#实践3-进程监控和保活" class="headerlink" title="实践3-进程监控和保活"></a>实践3-进程监控和保活</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#</span><br><span class="line"># 注释：进程监控和保活</span><br><span class="line"></span><br><span class="line">set -euxo pipefail</span><br><span class="line"></span><br><span class="line"># 参数检查</span><br><span class="line">if [ $# -lt 2 ]</span><br><span class="line">then</span><br><span class="line">    echo &quot;please input PROGRAM_DIR and PROGRAM_NAME&quot;</span><br><span class="line">    exit 0</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 进入进程启动目录</span><br><span class="line">cd $&#123;PROGRAM_DIR&#125;</span><br><span class="line"></span><br><span class="line"># 检查和启动进程</span><br><span class="line">RUN_CHECK() &#123;</span><br><span class="line">    # 检查进程是否存活</span><br><span class="line">    RUN_CHECK=`ps -ef | grep $&#123;PROGRAM_NAME&#125; | grep -wv grep | grep -wv vi | grep -wv tail | grep -wv $&#123;PROGRAM_CURRENT&#125; | grep -v &quot;\.sh&quot; | grep -v &quot;/alarm &quot; | wc -l`    </span><br><span class="line">    echo &quot;check_result: $&#123;RUN_CHECK&#125;&quot;</span><br><span class="line"></span><br><span class="line">    # 进程不存在，则启动</span><br><span class="line">    if [ $&#123;RUN_CHECK&#125; -lt 1 ]</span><br><span class="line">    then</span><br><span class="line">        NOW_TIME=`date +%Y/%m/%d-%H:%M:%S`</span><br><span class="line">        echo &quot;$&#123;NOW_TIME&#125;, restart the program: $?&quot;</span><br><span class="line">        echo &#x27;nohup hexo s &amp;&#x27; | bash</span><br><span class="line">        echo &quot;Fatal: $&#123;PROGRAM_NAME&#125; down $&#123;RUN_CHECK&#125; $&#123;NOW_TIME&#125;&quot; &gt;&gt; down.log</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 每5秒检查一次</span><br><span class="line">STEP=5</span><br><span class="line">for (( i=0; i&lt;60; i=(i+$&#123;STEP&#125;) )) do</span><br><span class="line">    RUN_CHECK</span><br><span class="line">    sleep $&#123;STEP&#125;</span><br><span class="line">done</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>


<h2 id="shell配置"><a href="#shell配置" class="headerlink" title="shell配置"></a>shell配置</h2><ol>
<li>查看当前默认shell和已安装shell <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ echo $SHELL</span><br><span class="line">$ cat /etc/shells</span><br></pre></td></tr></table></figure></li>
<li>查看bash版本 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ bash --version</span><br><span class="line">$ echo $BASH_VERSION</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><ol>
<li>echo-原样输出参数 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 原因输出包括换行格式</span><br><span class="line">$ echo &quot;&lt;HTML&gt;</span><br><span class="line">&lt;HEAD&gt;</span><br><span class="line">      &lt;TITLE&gt;Page Title&lt;/TITLE&gt;</span><br><span class="line">&lt;/HEAD&gt;</span><br><span class="line">&lt;BODY&gt;</span><br><span class="line">      Page body.</span><br><span class="line">&lt;/BODY&gt;</span><br><span class="line">&lt;/HTML&gt;&quot;</span><br><span class="line"></span><br><span class="line"># -n 去掉末尾默认的换行符</span><br><span class="line">$ echo -n a;echo b</span><br><span class="line">ab</span><br><span class="line"></span><br><span class="line"># -e 解释引号(单/双引号)参数里的特殊字符</span><br><span class="line">$ echo &quot;hello\nworld&quot;</span><br><span class="line">hello\nworld</span><br><span class="line"></span><br><span class="line">$ echo -e &#x27;hello\nworld&#x27;</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure></li>
<li>命令格式 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 短形式</span><br><span class="line">$ ls -r</span><br><span class="line"></span><br><span class="line"># 长形式</span><br><span class="line">$ ls --reverse</span><br><span class="line"></span><br><span class="line"># 太长换行，末尾加&#x27;\&#x27;</span><br><span class="line">$ echo foo bar</span><br><span class="line"># 等同于</span><br><span class="line">$ echo foo \</span><br><span class="line">bar</span><br></pre></td></tr></table></figure></li>
<li>空格-区分不同参数 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ &lt;command&gt; foo bar</span><br></pre></td></tr></table></figure></li>
<li>分号-命令结束符，后面命令不依赖前面命令执行成功与否 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ clear; ls</span><br></pre></td></tr></table></figure></li>
<li>命令组合符号-&amp;&amp; 和 || <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 依赖前面命令执行成功才能执行后面命令</span><br><span class="line">$ &lt;command_1&gt; &amp;&amp; &lt;command_2&gt;</span><br><span class="line"></span><br><span class="line"># 前面命令执行失败才执行后面命令</span><br><span class="line">$ &lt;command_1&gt; || &lt;command_2&gt;</span><br></pre></td></tr></table></figure></li>
<li>type-显示命令类型 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ type echo</span><br></pre></td></tr></table></figure></li>
<li>快捷键<ul>
<li><code>ctrl + L</code>：清除屏幕</li>
<li><code>ctrl + C</code>：终止当前正在执行的命令</li>
</ul>
</li>
</ol>
<h2 id="模式扩展"><a href="#模式扩展" class="headerlink" title="模式扩展"></a>模式扩展</h2><ol>
<li><code>~</code>：自动扩展成当前用户的主目录；</li>
<li><code>?</code>：代表文件路径里面的任意单个字符，不包括空字符；</li>
<li><code>*</code>：代表文件路径里面的任意数量的任意个字符，包括零个字符； <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 显示所有隐藏文件</span><br><span class="line">$ echo .*</span><br><span class="line"></span><br><span class="line"># 显示隐藏文件排除.和..</span><br><span class="line">$ echo .[!.]*</span><br></pre></td></tr></table></figure></li>
<li><code>[]</code>：可以匹配方括号里的任意一个字符； <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 文件名扩展</span><br><span class="line">$ echo a[bc]d</span><br><span class="line"># 匹配文件存在，显示如下</span><br><span class="line">abd acd</span><br><span class="line"># 匹配文件不存在，显示如下</span><br><span class="line">a[bc]d</span><br><span class="line"></span><br><span class="line"># !表示匹配除了b以外</span><br><span class="line">$ echo a[!b]d</span><br></pre></td></tr></table></figure></li>
<li><code>[start-end]</code>：连续范围扩展， <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[a-c] 等同于[abc]</span><br><span class="line">[0-9] 等同于[0123456789]</span><br><span class="line">[!0-9] 表示除0-9外的任意字符</span><br></pre></td></tr></table></figure></li>
<li><code>&#123;&#125;</code>: 表示分别扩展大括号里的所有值，使用逗号分割，逗号前后不能有空格 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 非文件名扩展，总是扩展，不管文件是否存在</span><br><span class="line">$ echo d&#123;a,b,c,d&#125;g</span><br><span class="line">dag dbg dcg ddg</span><br><span class="line"></span><br><span class="line"># 与其他组合，优先于其他</span><br><span class="line">$ echo /bin/&#123;cat,b*&#125;</span><br><span class="line">/bin/cat /bin/bx /bin/bxx ...</span><br></pre></td></tr></table></figure></li>
<li><code>&#123;start..end&#125;</code>：扩展成一个连续序列 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 顺序扩展</span><br><span class="line">$ echo d&#123;a..c&#125;g</span><br><span class="line">dag dbg dcg ddg</span><br><span class="line"></span><br><span class="line"># 逆序扩展</span><br><span class="line">$ echo d&#123;c..a&#125;g</span><br><span class="line">dcg dbg dag</span><br><span class="line"></span><br><span class="line"># 创建系列目录</span><br><span class="line">$ mkdir fiel_&#123;a,b,c&#125;.txt</span><br><span class="line"></span><br><span class="line"># for循环</span><br><span class="line">for i in &#123;1..4&#125;</span><br><span class="line">do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># 整数前导0</span><br><span class="line">$ echo &#123;01..3&#125;</span><br><span class="line">01 02 03</span><br><span class="line"></span><br><span class="line"># 间隔步长</span><br><span class="line">$ echo &#123;1..10..2&#125;</span><br><span class="line">1 3 5 7 9</span><br><span class="line">$ echo &#123;a..g..2&#125;</span><br><span class="line">a c e g</span><br></pre></td></tr></table></figure></li>
<li><code>$&#123;&#125;</code>：变量扩展 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ echo $&#123;SHELL&#125;</span><br><span class="line">/bin/bash</span><br><span class="line"></span><br><span class="line">&lt;!-- 所有以S开头的变量名 --&gt;</span><br><span class="line">$ echo  $&#123;!S*&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>$()</code>：子命令扩展 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ echo $(date)</span><br><span class="line">&lt;!-- 等同于 --&gt;</span><br><span class="line">$ echo `date`</span><br><span class="line"></span><br><span class="line">&lt;!-- 可嵌套 --&gt;</span><br><span class="line">$ echo $(ls $(pwd))</span><br></pre></td></tr></table></figure></li>
<li><code>$(())</code>：算术扩展，扩展成整数运算结果<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ echo $((2 + 2))</span><br><span class="line">4</span><br></pre></td></tr></table></figure></li>
<li><code>[[:class:]]</code>：字符类，文件名扩展，class扩展成该类之中任意一个<ol>
<li><code>[[:alnum:]]</code>：匹配任意英文字母与数字</li>
<li><code>[[:alpha:]]</code>：匹配任意英文字母</li>
<li><code>[[:digit:]]</code>：匹配任意数字0-9</li>
<li><code>[[:lower:]]</code>：匹配任意小写字母a-z</li>
<li><code>[[:upper:]]</code>：匹配任意大写字母A-Z</li>
<li><code>[[:blank:]]</code>：匹配空格和Tab健</li>
<li><code>[[:cntrl:]]</code>：匹配ASCII 码 0-31 的不可打印字符</li>
<li><code>[[:print:]]</code>：匹配ASCII 码 32-127 的可打印字符。</li>
<li><code>[[:xdigit:]]</code>：匹配16进制字符（A-F、a-f、0-9）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 打印数字开头的文件名</span><br><span class="line">$ echo [[:digit:]]*</span><br><span class="line"># 打印非数字开头的文件名</span><br><span class="line">$ echo [![:digit:]]*</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>注意项<ol>
<li>通配符是先解释再执行</li>
<li>文件名扩展在不匹配时，会解释成原样输出，再执行</li>
<li>只适用于单层路径，即不能匹配路径分隔符（<code>/</code>）。如果要匹配子目录里的文件，可以使用<code>ls */*.txt</code></li>
</ol>
</li>
<li>量词语法，也是文件名扩展<ol>
<li><code>?()</code>：模式匹配零次或1次</li>
<li><code>*()</code>：模式匹配0次或多次</li>
<li><code>+()</code>：模式匹配一次或多次</li>
<li><code>@()</code>：模式匹配仅一次</li>
<li><code>!()</code>：模式匹配给定模式之外的任何内容<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 匹配文件有且只有一个.txt或.php后缀</span><br><span class="line">$ ls abc@(.txt|.php)</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="引号和转义-bash只有字符串一种数据类型"><a href="#引号和转义-bash只有字符串一种数据类型" class="headerlink" title="引号和转义-bash只有字符串一种数据类型"></a>引号和转义-bash只有字符串一种数据类型</h2><ol>
<li>转义-转义特殊字符 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 转义打印特殊字符比如 $、 &amp;、 *、\</span><br><span class="line">$ echo \$date</span><br><span class="line">$date</span><br><span class="line">$ echo \\</span><br><span class="line">\</span><br><span class="line"></span><br><span class="line"># 转义打印不可打印字符，需要echo -e &#x27;&#x27;</span><br><span class="line">\a: 响铃</span><br><span class="line">\b: 退格</span><br><span class="line">\t: 制表符</span><br><span class="line">\r: 回车</span><br><span class="line">\n: 换行</span><br><span class="line"></span><br><span class="line"># 换行符加上\转换为普通空字符</span><br><span class="line">$ mv \</span><br><span class="line">/root/a/b \</span><br><span class="line">/root/b/b</span><br><span class="line"># 等同于</span><br><span class="line">$ mv /root/a/b /roott/b/b</span><br></pre></td></tr></table></figure></li>
<li>单引号-用于保留字符的字面含义<ol>
<li>单引号使得bash扩展、变量引用、算术运算、子命令失效。</li>
<li>反斜杠转义功能在单引号内失效，故在单引号内使用单引号，不能使用转义 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ echo $&#x27;it\&#x27;s&#x27;</span><br><span class="line">it&#x27;s</span><br><span class="line"></span><br><span class="line"># 等同于</span><br><span class="line">$ echo &quot;it&#x27;s&quot;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>双引号-除了<code>&amp;</code>、<code>`</code>、<code>\</code>保留特殊含义 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 换行符失效</span><br><span class="line">$ echo &quot;hello </span><br><span class="line">world&quot;</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line"></span><br><span class="line"># 文件名空格情况</span><br><span class="line">$ ls &quot;one file.txt&quot;</span><br><span class="line"></span><br><span class="line"># 保留原始命令结果输出</span><br><span class="line">$ echo $(cal)</span><br><span class="line">March 2023 Su Mo Tu We Th Fr Sa 1 2 3 4 5 ... 31</span><br><span class="line">$ echo &quot;$(cal)&quot;</span><br><span class="line">     March 2023     </span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">          1  2  3  4</span><br><span class="line"> 5  6  7  8  9 10 11</span><br><span class="line">12 13 14 15 16 17 18</span><br><span class="line">19 20 21 22 23 24 25</span><br><span class="line">26 27 28 29 30 31</span><br></pre></td></tr></table></figure></li>
<li>here 文档 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt; token</span><br><span class="line">text</span><br><span class="line">text</span><br><span class="line">token</span><br><span class="line"></span><br><span class="line"># 可发生变量替换，支持反斜杠转义，不支持通配符和引号</span><br><span class="line">$ foo=&#x27;hello world&#x27;</span><br><span class="line">$ cat &lt;&lt; _example_</span><br><span class="line">$foo</span><br><span class="line">&quot;$foo&quot;</span><br><span class="line">&#x27;$foo&#x27;</span><br><span class="line">_example_</span><br><span class="line">hello world</span><br><span class="line">&quot;hello world&quot;</span><br><span class="line">&#x27;hello world&#x27;</span><br><span class="line"></span><br><span class="line"># 如果不希望变量替换，则将here文档的开始标记放在单引号之中</span><br><span class="line"></span><br><span class="line"># here 字符串，将字符串通过标准输入，传递给命令</span><br><span class="line">$ md5sum &lt;&lt;&lt; &#x27;ddd&#x27;</span><br><span class="line"># 等同于</span><br><span class="line">$ echo &#x27;ddd&#x27;|md5sum</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="变量-环境变量和自定义变量"><a href="#变量-环境变量和自定义变量" class="headerlink" title="变量-环境变量和自定义变量"></a>变量-环境变量和自定义变量</h2><ol>
<li>显示所有变量 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set</span><br></pre></td></tr></table></figure></li>
<li>创建&#x2F;赋值变量-只有字符串，无类型概念 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myvar=&#x27;hello world&#x27;</span><br><span class="line">myvar=hello</span><br><span class="line">myvar2=myvar</span><br></pre></td></tr></table></figure></li>
<li>删除变量 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unset myvar</span><br><span class="line"># 因为不存在的变量一律等于空字符串</span><br><span class="line">myvar=&#x27;&#x27;</span><br></pre></td></tr></table></figure></li>
<li>输出变量 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export NAME=value</span><br></pre></td></tr></table></figure></li>
<li>特殊变量<ol>
<li><code>$?</code>：为上一个命令退出码，成功为0，失败为其他</li>
<li><code>$$</code>：当前shell的进程ID</li>
<li><code>$@</code>：脚本的参数值</li>
<li><code>$#</code>：脚本的参数数量</li>
</ol>
</li>
<li>变量默认值 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 变量存在且不为空，返回其值，否则返回默认值xxx</span><br><span class="line">$&#123;varname:-xxx&#125;</span><br><span class="line"></span><br><span class="line"># 变量存在且不为空，返回其值，否则设置并返回默认值xxx</span><br><span class="line">$&#123;varname:=xxx&#125;</span><br><span class="line"></span><br><span class="line"># 变量存在且不为空，返回其值，否则打印xxx并中断脚本</span><br><span class="line">$&#123;varname:?xxx&#125;</span><br><span class="line"></span><br><span class="line"># 变量存在且不为空，返回xxx，否则返回空</span><br><span class="line">$&#123;varname:+xxx&#125;</span><br><span class="line"></span><br><span class="line"># 上述中varname可以用数字1到9表示脚本参数</span><br><span class="line">filename=$&#123;1:?&quot;filename missing.&quot;&#125;</span><br></pre></td></tr></table></figure></li>
<li>readonly只读命令 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readonly foo=1</span><br></pre></td></tr></table></figure></li>
<li>let命令 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 直接执行算术表达式</span><br><span class="line">let foo=1+2</span><br><span class="line"></span><br><span class="line"># 同时多个</span><br><span class="line">$ let &quot;v1 = 1&quot; &quot;v2 = v1++&quot;</span><br><span class="line">$ echo $v1,$v2</span><br><span class="line">2,1</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h2><ol>
<li>获取字符串长度 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;#varname&#125;</span><br></pre></td></tr></table></figure></li>
<li>子串-${varname:offset:length} <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 从头部位置offset（&gt;=0开始），截取长度为length的子串</span><br><span class="line">$&#123;varname:offset:length&#125;</span><br><span class="line"></span><br><span class="line"># 从头部位置offset（&gt;=0开始），截取到尾部的子串</span><br><span class="line">$&#123;varname:offset&#125;</span><br><span class="line"></span><br><span class="line"># 从尾部未知offset（&lt;=-1开始），负数前面必须有个空格</span><br><span class="line">foo=&quot;abcd efg hijkm&quot;</span><br><span class="line">$&#123;varname: -5&#125;</span><br><span class="line">hijkm</span><br><span class="line"># length为正数表示长度</span><br><span class="line">$&#123;varname: -5:2&#125;</span><br><span class="line"># length为负数排除尾部负数个字符</span><br><span class="line">$&#123;varname: -5:-2&#125;</span><br><span class="line">hij</span><br></pre></td></tr></table></figure></li>
<li>搜索和替换-#&#x2F;%<ol>
<li>头部尾部匹配替换 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 头部/尾部匹配删除，pattern可以使用*?[]等通配符</span><br><span class="line"># 删除最短头部匹配，返回剩余</span><br><span class="line">$&#123;variable#pattern&#125;</span><br><span class="line"># 删除最长头部匹配，返回剩余</span><br><span class="line">$&#123;variable##pattern&#125;</span><br><span class="line"># 删除最短尾部匹配，返回剩余</span><br><span class="line">$&#123;variable%pattern&#125;</span><br><span class="line"># 删除最长尾部匹配，返回剩余</span><br><span class="line">$&#123;variable%%pattern&#125;    </span><br><span class="line"></span><br><span class="line"># e.g.删除文件路径，只返回文件名</span><br><span class="line">$ path=/home/cam/book/long.file.name</span><br><span class="line">$&#123;path##*/&#125;</span><br><span class="line">long.file.name</span><br><span class="line"># e.g.删除文件名，只返回文件路径</span><br><span class="line">$&#123;path%/*&#125;</span><br><span class="line">/home/cam/book</span><br><span class="line"></span><br><span class="line"># 头部匹配替换，只有#，最长匹配替换</span><br><span class="line">$&#123;variable/#pattern/string&#125;</span><br><span class="line"># e.g.</span><br><span class="line">$ foo=XXX.jpg</span><br><span class="line">$ echo $&#123;foo/#XXX/xxx&#125;</span><br><span class="line">xxx.jpg</span><br><span class="line"># 尾部匹配替换，只有%，最长匹配替换</span><br><span class="line">$&#123;variable/%pattern/string&#125;</span><br><span class="line"># e.g.</span><br><span class="line">$ foo=XXX.jpg</span><br><span class="line">$ echo $&#123;foo/%jpg/JPG&#125;</span><br><span class="line">XXX.JPG</span><br><span class="line"></span><br><span class="line"># e.g.</span><br><span class="line">$ path=/home/cam/book/long.file.name</span><br><span class="line">$ echo $&#123;path%.*&#125;</span><br><span class="line">/home/cam/book/long.file</span><br><span class="line">$ echo $&#123;path%%.*&#125;</span><br><span class="line">/home/cam/book/long</span><br></pre></td></tr></table></figure></li>
<li>任意位置的模式匹配 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 任意位置最长匹配，仅替换第一个</span><br><span class="line">$&#123;variable/pattern/string&#125;</span><br><span class="line"># 任意位置最长匹配，替换所有</span><br><span class="line">$&#123;variable//pattern/string&#125;</span><br><span class="line"># 省略string表示替换为空字符串即删除</span><br><span class="line"></span><br><span class="line"># e.g.</span><br><span class="line">$ path=/home/cam/foo/foo.name</span><br><span class="line">$ echo $&#123;path/foo/bar&#125;</span><br><span class="line">/home/cam/bar/foo.name</span><br><span class="line">$ echo $&#123;path//foo/bar&#125;</span><br><span class="line">/home/cam/bar/bar.name</span><br><span class="line"></span><br><span class="line"># e.g.将所有:改为换行符</span><br><span class="line"># 使用-e表示将替换后的\n字符，解释为换行</span><br><span class="line">$ echo -e $&#123;PATH//:/&#x27;\n&#x27;&#125;</span><br><span class="line"></span><br><span class="line"># e.g.通配符替换</span><br><span class="line">$ phone=&quot;555-456-1414&quot;</span><br><span class="line">$ echo $&#123;phone/5?4/-&#125;</span><br><span class="line">55-56-1414</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>改变大小写 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 转为大写</span><br><span class="line">$&#123;variable^^&#125;</span><br><span class="line"></span><br><span class="line"># 转为小写</span><br><span class="line">$&#123;variable,,&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="算术表达式"><a href="#算术表达式" class="headerlink" title="算术表达式"></a>算术表达式</h2><ol>
<li>算术运算-只能整数 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 自动忽略空格，不返回值，结果不为0则$?为0成功，否则为1失败</span><br><span class="line">((...))</span><br><span class="line"></span><br><span class="line"># 返回值</span><br><span class="line">$ echo $((2 + 2))</span><br><span class="line">4</span><br><span class="line"></span><br><span class="line"># 可以嵌套</span><br><span class="line">$ echo $(((2**3) * 2))</span><br><span class="line">16</span><br><span class="line">$ echo $((2**(3 * 2)))</span><br><span class="line">64</span><br><span class="line">$ echo $((2**$((3 * 2))))</span><br><span class="line">64</span><br><span class="line"></span><br><span class="line"># 内部字符串被当做变量名，可不加$</span><br><span class="line">number=2</span><br><span class="line">$ echo $((number + 1))</span><br><span class="line"></span><br><span class="line"># 内部变量不存在或变量值为字符串，默认当做0做运算</span><br></pre></td></tr></table></figure></li>
<li>支持的符号<ul>
<li><code>+</code>：加法</li>
<li><code>-</code>：减法</li>
<li><code>*</code>：乘法</li>
<li><code>/</code>：除法（整除）</li>
<li><code>%</code>：余数</li>
<li><code>**</code>：指数</li>
<li><code>++</code>：自增运算（变量前缀或后缀）</li>
<li><code>--</code>：自减运算（变量前缀或后缀）</li>
</ul>
</li>
<li>数值进制<ul>
<li><code>number</code>：没有任何特殊表示法的数字是十进制数（以10为底）。</li>
<li><code>0number</code>：八进制数。</li>
<li><code>0xnumber</code>：十六进制数。</li>
<li><code>base#number</code>：base进制的数。 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ echo $((0xff))</span><br><span class="line">255</span><br><span class="line">$ echo $((2#11111111))</span><br><span class="line">255</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>位运算<ul>
<li><code>&lt;&lt;</code>：位左移运算，把一个数字的所有位向左移动指定的位。</li>
<li><code>&gt;&gt;</code>：位右移运算，把一个数字的所有位向右移动指定的位。</li>
<li><code>&amp;</code>：位的“与”运算，对两个数字的所有位执行一个AND操作。</li>
<li><code>|</code>：位的“或”运算，对两个数字的所有位执行一个OR操作。</li>
<li><code>~</code>：位的“否”运算，对一个数字的所有位取反。</li>
<li><code>^</code>：位的异或运算（exclusive or），对两个数字的所有位执行一个异或操作。</li>
</ul>
</li>
<li>逻辑运算-逻辑表达式为真，返回1，否则返回0。<ul>
<li><code>&lt;</code>：小于</li>
<li><code>&gt;</code>：大于</li>
<li><code>&lt;=</code>：小于或相等</li>
<li><code>&gt;=</code>：大于或相等</li>
<li><code>==</code>：相等</li>
<li><code>!=</code>：不相等</li>
<li><code>&amp;&amp;</code>：逻辑与</li>
<li><code>||</code>：逻辑或</li>
<li><code>!</code>：逻辑否<br> expr1?expr2:expr3<code>：三元条件运算符。若表达式expr1的计算结果为非零值（算术真）- </code>，则执行表达式expr2，否则执行表达式expr3。</li>
</ul>
</li>
<li>赋值运算 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ echo $((a=1))</span><br><span class="line">1</span><br><span class="line">还有+=、-=、*=、&lt;&lt;=、|=等</span><br></pre></td></tr></table></figure></li>
<li>求值运算-<code>,</code>在<code>$((...))</code>执行前后连个表达式，并返回后一个表达式的值 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ echo $((foo = 1 + 2, 3 * 4))</span><br><span class="line">12</span><br><span class="line">$ echo $foo</span><br><span class="line">3</span><br></pre></td></tr></table></figure></li>
<li>expr <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ foo=3</span><br><span class="line">$ expr $foo + 2</span><br><span class="line">5</span><br></pre></td></tr></table></figure></li>
<li>let命令 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 命令用于将算术运算的结果，赋予一个变量。不能有空格</span><br><span class="line">$ let x=2+3</span><br><span class="line">$ echo $x</span><br><span class="line">5</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="bash脚本"><a href="#bash脚本" class="headerlink" title="bash脚本"></a>bash脚本</h2><ol start="0">
<li>运行方式 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 首行的#!/bin/sh是注释不起作用，新开子进程执行</span><br><span class="line">bash x.sh</span><br><span class="line"></span><br><span class="line"># 可执行文件执行脚本，先加权限，再按首行执行解释器执行，新开子进程执行</span><br><span class="line">chmod u+rx</span><br><span class="line">./x.sh`  </span><br><span class="line">    </span><br><span class="line"># 当前进程执行，主要为了脚本内部加载外部库</span><br><span class="line">source ./x.sh == . ./x.sh</span><br></pre></td></tr></table></figure></li>
<li>读取输入&#x2F;文件-read <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 读取输入</span><br><span class="line">echo -n &quot;输入一些文本 &gt; &quot;</span><br><span class="line">read text</span><br><span class="line">echo &quot;你的输入：$text&quot;</span><br><span class="line"></span><br><span class="line"># 超时3秒和提示</span><br><span class="line">read -t 3 -p &quot;Enter one or more values &gt; &quot;</span><br><span class="line"># 没有指定变量返回到环境变量REPLY</span><br><span class="line">echo &quot;REPLY = &#x27;$REPLY&#x27;&quot;</span><br><span class="line"></span><br><span class="line"># 读取文件</span><br><span class="line">filename=&#x27;/etc/hosts&#x27;</span><br><span class="line">while read myline</span><br><span class="line">do</span><br><span class="line">    echo &quot;$myline&quot;</span><br><span class="line">done &lt; $filename</span><br></pre></td></tr></table></figure></li>
<li>条件判断 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"># 基本</span><br><span class="line">if test $1 = &#x27;root&#x27;</span><br><span class="line">then</span><br><span class="line">    echo &#x27;hello root&#x27;</span><br><span class="line">elif [ $1 = &#x27;jesonlin&#x27; ]; then</span><br><span class="line">    echo &#x27;hello jesonlin&#x27;</span><br><span class="line">else</span><br><span class="line">    echo &#x27;you are not root&#x27;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># true/false 特殊命令</span><br><span class="line">if true</span><br><span class="line">then</span><br><span class="line">    echo &#x27;always true&#x27;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 条件三种样式</span><br><span class="line">test -e /tmp/file.txt</span><br><span class="line">[ -e /tmp/file.txt ]</span><br><span class="line">[[ -e /tmp/file.txt ]]  # 第三种还支持正则</span><br><span class="line"></span><br><span class="line"># 条件是一个命令，可以是test，也可以是其他命令，命令返回值为0表示判断成立</span><br><span class="line"># 文件是否存在</span><br><span class="line">[ -a file ]</span><br><span class="line">[ -e file ]</span><br><span class="line"># 文件是否是目录</span><br><span class="line">[ -d file ]</span><br><span class="line"></span><br><span class="line"># 字符串判断，变量放在双引号之中</span><br><span class="line">[ $str ]  # 是否不为空</span><br><span class="line">[ -n $str ]  # 长度是否大于0</span><br><span class="line">[ -z $str ]  # 长度是否为0</span><br><span class="line">[ &quot;$str1&quot; == &quot;$str2&quot; ]  # 是否相等</span><br><span class="line">[ &quot;$str1&quot; != &quot;$str2&quot; ]  # 是否不相等</span><br><span class="line">[ &quot;$str1&quot; &#x27;&gt;&#x27; &quot;$str2&quot; ]  # 字符串1是否大于2</span><br><span class="line"></span><br><span class="line"># 整数判断</span><br><span class="line">[ $num1 -eq $num2 ]  # 是否相等</span><br><span class="line">[ $num1 -ne $num2 ]  # 是否不相等</span><br><span class="line">[ $num1 -le $num2 ]  # 是否小于或等于</span><br><span class="line">[ $num1 -lt $num2 ]  # 是否小于</span><br><span class="line">[ $num1 -ge $num2 ]  # 是否大于或等于</span><br><span class="line">[ $num1 -gt $num2 ]  # 是否大于</span><br><span class="line"></span><br><span class="line"># 正则判断是否是整数</span><br><span class="line">if [[ &quot;$0&quot; =~ ^-?[0-9]+=$ ]]</span><br><span class="line">then</span><br><span class="line">    echo &#x27;$0 is an integer&#x27;</span><br><span class="line">else</span><br><span class="line">    echo &#x27;s0 is not an integer&#x27;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># 逻辑运算</span><br><span class="line">&amp;&amp;(与) ||(或) !(非)</span><br><span class="line"></span><br><span class="line"># case结构</span><br><span class="line">case &quot;$OS&quot; in</span><br><span class="line">  FreeBSD) echo &quot;This is FreeBSD&quot; ;;</span><br><span class="line">  Darwin) echo &quot;This is Mac OSX&quot; ;;</span><br><span class="line">  AIX) echo &quot;This is AIX&quot; ;;</span><br><span class="line">  Minix) echo &quot;This is Minix&quot; ;;</span><br><span class="line">  Linux) echo &quot;This is Linux&quot; ;;</span><br><span class="line">  *) echo &quot;Failed to identify this OS&quot; ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure></li>
<li>循环 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># while 循环</span><br><span class="line">number=0</span><br><span class="line">while [ &quot;$number&quot; -lt 10 ]; do</span><br><span class="line">  echo &quot;Number = $number&quot;</span><br><span class="line">  number=$((number + 1))</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># until 循环-不符合条件（判断条件失败）就不断循环</span><br><span class="line">until condition; do</span><br><span class="line">  commands</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># for...in 循环</span><br><span class="line"># 列表由通配符产生，遍历当前目录下所有png图片</span><br><span class="line">for i in *.png; do</span><br><span class="line">  ls -l $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># for 循环，类似C语言，变量不必加$</span><br><span class="line">for (( i=0; i&lt;5; i=i+1 )); do</span><br><span class="line">  echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># break, continue, 同C语言</span><br></pre></td></tr></table></figure></li>
<li>函数 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 第一种</span><br><span class="line">fn() &#123;</span><br><span class="line">  # codes</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 第二种</span><br><span class="line">function fn() &#123;</span><br><span class="line">  # codes</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 参数变量</span><br><span class="line"># 函数的参数变量，与脚本参数变量是一致的</span><br><span class="line">$1~$9：函数的第一个到第9个的参数。</span><br><span class="line">$0：函数所在的脚本名。</span><br><span class="line">$#：函数的参数总数。</span><br><span class="line">$@：函数的全部参数，参数之间使用空格分隔。</span><br><span class="line">$*：函数的全部参数，参数之间使用变量$IFS值的第一个字符分隔，</span><br><span class="line"></span><br><span class="line"># Bash 函数体内直接声明的变量，属于全局变量，整个脚本都可以读取。</span><br><span class="line"># 函数体内不仅可以声明全局变量，还可以修改全局变量。</span><br><span class="line"># 函数里面可以用local命令声明局部变量，只在函数体内有效，函数体外没有定义。</span><br></pre></td></tr></table></figure></li>
<li>数组 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># 定义数组</span><br><span class="line">ARRAY[INDEX]=value</span><br><span class="line">ARRAY=(value1 value2 value3)</span><br><span class="line">ARRAY=([2]value1 [0]value2 [1]value3)  # 指定每个元素位置</span><br><span class="line">$ mp3s=( *.mp3 )  # 通配符定位数组</span><br><span class="line">$ read -a dice  # 用户命令行输入传入数组</span><br><span class="line"></span><br><span class="line"># 读取数组</span><br><span class="line">$ echo $&#123;array[i]&#125;</span><br><span class="line">$ foo=(a b c d e f)</span><br><span class="line">$ echo $&#123;foo[@]&#125;</span><br><span class="line">a b c d e f</span><br><span class="line">for i in &quot;$&#123;names[@]&#125;&quot;; do</span><br><span class="line">  echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># 数组长度</span><br><span class="line">$&#123;#array[*]&#125;</span><br><span class="line">$&#123;#array[@]&#125;</span><br><span class="line"></span><br><span class="line"># 数组序号</span><br><span class="line">$ arr=([5]=a [9]=b [23]=c)</span><br><span class="line">$ echo $&#123;!arr[@]&#125;</span><br><span class="line">5 9 23</span><br><span class="line">$ echo $&#123;!arr[*]&#125;</span><br><span class="line">5 9 23</span><br><span class="line"></span><br><span class="line"># 提取数组1号开始的3个成员</span><br><span class="line">$ echo $&#123;arr[@]:1:3&#125;</span><br><span class="line"># 提取数组所有个成员</span><br><span class="line">$ echo $&#123;arr[@]:0&#125;</span><br><span class="line"></span><br><span class="line"># 追加数组成员，不能有空格</span><br><span class="line">$ arr+=(d e f)</span><br><span class="line"></span><br><span class="line"># 删除数组某个成员，只是隐藏，而不是删除</span><br><span class="line">$ unset arr[0]</span><br><span class="line"># 清空数组</span><br><span class="line">$ use tarr</span><br><span class="line"></span><br><span class="line"># 关联数组，类似map</span><br><span class="line">$ declare -A colors  # 必须带-A选项</span><br><span class="line">$ colors[&quot;red&quot;]=&quot;#ff0000&quot;</span><br><span class="line">$ colors[&quot;green&quot;]=&quot;#00ff00&quot;</span><br><span class="line">$ colors[&quot;blue&quot;]=&quot;#0000ff&quot;</span><br><span class="line"># 索引</span><br><span class="line">$ echo $&#123;colors[&quot;blue&quot;]&#125;</span><br></pre></td></tr></table></figure></li>
<li>脚本命令<ol start="0">
<li>bash 执行脚本会创建一个子shell去执行，默认忽略不存在的变量</li>
<li>set 命令-修改子shell环境的运行参数，即定制环境 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash </span><br><span class="line"></span><br><span class="line"># 不存在变量就会报错</span><br><span class="line">set -u</span><br><span class="line"></span><br><span class="line"># 执行命令前打印命令本身，行首以+表示</span><br><span class="line">set -x  # 命令打印</span><br><span class="line">set +x  # 取消命令打印</span><br><span class="line"></span><br><span class="line"># 脚本有错误就停止</span><br><span class="line">set -e  # 开启</span><br><span class="line">set +e  # 关闭-e选项</span><br><span class="line">command || &#123; echo &quot;command failed&quot;; exit 1; &#125;</span><br><span class="line"># 管道命令以最后一个命令成功与否代表整个命令的返回值</span><br><span class="line"># 管道命令中只要一个子命令失败就终止脚本</span><br><span class="line">set -eo pipefail</span><br><span class="line"></span><br><span class="line"># 不运行，只检查语法</span><br><span class="line">set -n</span><br><span class="line"></span><br><span class="line"># 总结-写法一</span><br><span class="line">set -euxo pipefail</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>常见错误<ol>
<li>命令失败情况 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 如果$dir_name不存在，会失败，会切换进用户主目录，执行接下来命令</span><br><span class="line">cd $dir_name</span><br><span class="line">rm *</span><br><span class="line"># 正确写法</span><br><span class="line">[[ -d $dir_name ]] &amp;&amp; cd $dir_name &amp;&amp; rm *</span><br><span class="line"># 不放心删除东西可以先打印看看</span><br><span class="line">[[ -d $dir_name ]] &amp;&amp; cd $dir_name &amp;&amp; echo rm *</span><br></pre></td></tr></table></figure></li>
<li>定位问题 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 打印行号</span><br><span class="line">echo &quot;This is line $LINENO&quot;</span><br><span class="line"></span><br><span class="line"># 打印函数堆栈上的函数名</span><br><span class="line">function func1()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;func1: FUNCNAME0 is $&#123;FUNCNAME[0]&#125;&quot;</span><br><span class="line">  echo &quot;func1: FUNCNAME1 is $&#123;FUNCNAME[1]&#125;&quot;</span><br><span class="line">  echo &quot;func1: FUNCNAME2 is $&#123;FUNCNAME[2]&#125;&quot;</span><br><span class="line">  func2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 脚本调用堆栈</span><br><span class="line">function func1()</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;func1: BASH_SOURCE0 is $&#123;BASH_SOURCE[0]&#125;&quot;</span><br><span class="line">  echo &quot;func1: BASH_SOURCE1 is $&#123;BASH_SOURCE[1]&#125;&quot;</span><br><span class="line">  echo &quot;func1: BASH_SOURCE2 is $&#123;BASH_SOURCE[2]&#125;&quot;</span><br><span class="line">  func2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="REFERENCE"><a href="#REFERENCE" class="headerlink" title="REFERENCE"></a>REFERENCE</h2><p><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-shell.html">菜鸟教程</a><br><a target="_blank" rel="noopener" href="https://wangdoc.com/bash/">Bash 脚本教程</a></p>

    </div>

    
    
    

    
      <div>
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;">------------->本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

      </div>
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="jesonlin 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="jesonlin 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>原作者： </strong>jesonlin
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://jesonlin.com/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/bash/" title="bash">https://jesonlin.com/编程语言/bash/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/bash/" rel="tag"># bash</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E5%B7%A5%E5%85%B7/git/" rel="prev" title="git">
                  <i class="fa fa-chevron-left"></i> git
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E6%A1%86%E6%9E%B6/django/" rel="next" title="django">
                  django <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2022 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jesonlin</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">197k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">2:59</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<!-- calendar widget -->

    <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-calendar/calendar.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-calendar/languages.min.js"></script>
    <script>
    $(function() {
        $('#CloudCalendar').aCalendar('zh-CN',
            $.extend(
                '', {
                    single:true,
                    root:'/calendar/'
                }
            )
        );
    });
    </script>

<script src="https://unpkg.com/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"linjinzhong","repo":"blog","client_id":"8548519d63363d8264e2","client_secret":"72867db898357c6f54e568137fb92545663b5c4a","admin_user":"linjinzhong","distraction_free_mode":true,"proxy":"https://strong-caramel-969805.netlify.app/github_access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"5ec0fed7b09bd2ce349e17880f451084"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
